<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="google" content="notranslate" />
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut Icon" type="image/x-icon" href="">
    <link rel="icon" type="image/png" sizes="16x16" href="">
    <link rel="icon" type="image/png" sizes="32x32" href="">
    <link rel="icon" type="image/png" sizes="96x96" href="">

    <title></title>

    <!-- core -->
    <script src="../static/core/jquery-3.5.1/jquery-3.5.1.min.js"></script>
    <link href="../static/core/bootstrap-5.1.3/css/bootstrap.min.css" rel="stylesheet">
    <script src="../static/core/bootstrap-5.1.3/js/bootstrap.bundle.min.js"></script>

    <!-- plugins -->
    <script src="../static/plugins/vue-3.2.45/vue.global.min.js"></script>
    <link href="../static/plugins/dat.gui-0.7.9/dat.gui.css" rel="stylesheet">
    <script src="../static/plugins/dat.gui-0.7.9/dat.gui.min.js"></script>

    <!-- main -->
    <link href="../static/common/css/main.css" rel="stylesheet">
    <script src="../static/common/js/main.js"></script>

    <style>
        .mainFrame { display: grid; grid-template-rows: repeat(8, 1fr); grid-template-columns: repeat(14, 1fr); gap: 12px; padding: 1rem 2rem; }

        .logoBox { background-color: #fff; padding: 1rem; display: flex; align-items: center; cursor: auto; }
        .logoBox.color1 { background-color: rgba(173, 0, 41, 0.6); }
        .logoBox.color2 { background-color: rgba(216, 0, 84, 0.6); }
        .logoBox.color3 { background-color: rgba(52, 0, 21, 0.6); }
        .logoBox.color4 { background-color: rgba(143, 0, 56, 0.6); }
        .logoBox.midBox { background-color: transparent !important; grid-area: 3 / 5 / span 4 / span 6; padding: calc(2rem + 3vw); cursor: pointer; }

        .logoBox > .logoFilm { width: 100%; height: 0; display: flex; align-items: center; }
        .logoBox > img { object-fit: contain; width: 100%; margin: auto; }
        .logoBox.active { background-color: #fff; }
        .flex-center { display: flex; align-items: center; justify-content: center; }

        .dg :is(button, select, input) { line-height: normal; font-size: 13.33px; }
        .dg * { box-sizing: content-box; }
    </style>
</head>
<body>
    <div id="wrap">
        <main class="img_container darkRed-bg">
            <div class="mainFrame h-100 m-auto">
                <a class="logoBox" v-for="(logo,idx) in logos" :class="[logo.css, {'active': randomLights.indexOf(idx) > -1 }]"  :href="logo.href">
                    <div class="logoFilm">
                        <img :src="logo.url">
                    </div>
                </a>
            </div>
        </main>
    </div>

    <script>
        let logos = {
            data() {
                return {
                    sto: null,
                    speed: 200,
                    gui: new dat.gui.GUI(),
                    amount: 10,
                    grids: 8 * 14,
                    mid: 4 * 6,
                    randomLights: [0,0,0],
                }
            },
            computed: {
                blocks() {
                    return this.grids - this.mid + 1
                },
                logos() {
                    let arr = Array.from( { length: this.blocks }, (e,i) => {
                        let rdLogo = ~~(Math.random() * 7) + 1
                        let rdColor = ~~(Math.random() * 4) + 1

                        let obj = {
                            url: `../static/common/img/logo${rdLogo}.svg`,
                            css: `color${rdColor}`,
                            href: 'javascript:',
                        }
                        if ( this.blocks >> 1 === i ){
                            obj.url = `../static/common/img/logo_mid.svg`
                            obj.css = 'midBox'
                            obj.href = 'result.html'
                        }

                        return obj
                    })

                    return arr
                }
            },
            methods: {
                randomLightsUpdate(){
                    this.randomLights = this.randomLights.map(()=>{
                        return ~~(Math.random() * this.blocks)
                    })
                },

                newTimeout(){
                    let This = this
                    This.sto = setTimeout(()=>{
                        This.randomLightsUpdate()
                        clearTimeout(This.sto)
                        This.newTimeout()
                    }, This.speed )
                },
            },
            mounted() {
                let This = this
                This.randomLights = Array( +This.amount ).fill(0)

                this.newTimeout()
                // this.gui.remember( this )
                this.gui.add(this, 'speed').min(10).max(2000).step(10).onChange(()=>{
                    clearTimeout(This.sto)
                    This.newTimeout()
                })
                this.gui.add(this, 'amount').min(0).max(This.blocks).step(1).onChange(()=>{
                    This.randomLights = Array( +This.amount ).fill(0)
                    This.randomLightsUpdate()
                })
            },
        }
        Vue.createApp( logos ).mount('#wrap')
    </script>
</body>
</html>